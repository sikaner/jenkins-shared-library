#!/usr/bin/env groovy

def call() {
    sh """
        # Activate virtual environment
        source \${WORKSPACE}/mldenv/bin/activate
        
        # Install requirements and run training
        pip install -r requirements.txt
        python3 src/train.py
        
        # Deactivate virtual environment
        deactivate
    """
}
#!/usr/bin/env groovy

def call(String environment) {
    sh """
        # Activate virtual environment
        source \${WORKSPACE}/mldenv/bin/activate
        
        # Run test script
        python3 src/test.py ${environment}
        
        # Deactivate virtual environment
        deactivate
    """
}
#!/usr/bin/env groovy

def call(String environment) {
    sh """
        # Activate virtual environment
        source \${WORKSPACE}/mldenv/bin/activate
        
        # Run deploy script with environment
        python3 src/deploy.py ${environment}
        
        # Deactivate virtual environment
        deactivate
    """
}

// vars/emailNotification.groovy
def call(String status, String environment) {
    emailext (
        subject: "Pipeline Status: ${status} for ${environment}",
        body: "The pipeline for ${environment} environment has ${status}.",
        to: 'sikanderhayt33@gmail.com'
    )
}
