// vars/trainModel.groovy
def call() {
    sh """
        source ${env.WORKSPACE}/mldenv/bin/activate
        python src/train.py
    """
}

// vars/testModel.groovy
def call(String modelAlias) {
    sh """
        source ${env.WORKSPACE}/mldenv/bin/activate
        python src/test.py ${modelAlias}
    """
}

// vars/deployModel.groovy
def call(String modelAlias, String stage) {
    sh """
        source ${env.WORKSPACE}/mldenv/bin/activate
        python src/deploy.py ${modelAlias} ${stage}
    """
}

// vars/notifyEmail.groovy
def call(String status) {
    emailext (
        subject: "Pipeline Status: ${status}",
        body: "The pipeline completed with status: ${status}",
        recipientProviders: [[$class: 'DevelopersRecipientProvider']],
        to: env.EMAIL_RECIPIENTS
    )
}
